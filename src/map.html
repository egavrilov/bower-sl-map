<div class="loader" ng-show="!slMap.map"></div>
<div class="adress-popup" map-lazy-load="http://maps.google.com/maps/api/js" ng-init="slMap.init()">
    <a href="" class="search-icon"><img src="/bower_components/sl-map/src/images/all/loupe-icon.png" alt=""></a>
    <div class="adress-popup-left active">
        <h3 class="adress-popup-title">Где забрать?</h3>
        <div class="adress-popup-tabs" ng-click="slMap.isMobile && (slMap.isMapActive = !slMap.isMapActive)">
            <a href="" class="adress-tab adress-tab-list" ng-class="{'active': !slMap.isMapActive}">Список</a>
            <a href="" class="adress-tab adress-tab-map" ng-class="{'active': slMap.isMapActive}">НА КАРТЕ</a>
        </div>
        <div class="adress-popup-search">
            <input class="input adress-popup-input" type="text" ng-model="slMap.outletsFilter" ng-change="slMap.bound()">
        </div>
        <div class="adress-popup-list" ng-show="!slMap.isMobile || !slMap.isMapActive">
            <div ng-repeat="outlet in slMap.filtered | filter: slMap.outletsFilter | orderBy: ['remains.available', 'kind.sort']"
                 ng-class="{'active': outlet.selected, 'address-popup-list_remains': outlet.remains }"
                 ng-click="slMap.select(outlet)"
                 class="adress-popup-item">
                <div class="adress-popup-name"><span ng-bind="::outlet.mall">SUNLIGHT МЕГА Теплый Стан</span> <span ng-bind="::outlet.kind.name">гипермаркет</span></div>
                <div class="adress-popup-street">
                    <span ng-bind="::outlet.address">Москва, улица Арбат, 12 с 1</span>
                    <div class="adress-popup-time" ng-bind="::outlet.opening_hours">ПН-ВС 10:00-22:00</div>
                </div>
                <div class="adress-popup-metro" ng-repeat="metro in ::outlet.metros">
                    <span ng-style="{color: '#' + metro.color}" class="futuraIcon">&#x00BD;</span>
                    <span ng-bind="metro.name">Электрозаводская</span>
                </div>
                <div class="adress-popup-info" ng-if="::outlet.remains">
                    <span class="adress-popup-status adress-popup-status-green" ng-if="::outlet.remains.available">В наличии</span>
                    <span class="adress-popup-status" ng-if="::outlet.remains.pickup">Под заказ</span>
                    <span ng-if="::outlet.remains.available !== false">Можно забрать <span ng-bind="::outlet.remains.pickup || 'сегодня'"></span></span>
                </div>
                <span class="adress-item-arrow"><img src="/bower_components/sl-map/src/images/all/adress-arrow-left.png" alt=""></span>
            </div>
            <div ng-if="slMap.outletsFilter || slMap.otherRegion.length" class="adress-popup-other-region">В других регионах</div>
            <div ng-repeat="outlet in slMap.otherRegion | filter: slMap.outletsFilter | orderBy: ['remains.available', 'kind.sort']"
                 ng-class="{'active': outlet.selected, 'address-popup-list_remains': outlet.remains }"
                 ng-click="slMap.select(outlet)"
                 ng-if="outlet.remains && (slMap.outletsFilter || slMap.otherRegion)"
                 class="adress-popup-item">
                <div class="adress-popup-name"><span ng-bind="::outlet.mall">SUNLIGHT МЕГА Теплый Стан</span> <span ng-bind="::outlet.kind.name">гипермаркет</span></div>
                <div class="adress-popup-street">
                    <span ng-bind="::outlet.address">Москва, улица Арбат, 12 с 1</span>
                    <div class="adress-popup-time" ng-bind="::outlet.opening_hours">ПН-ВС 10:00-22:00</div>
                </div>
                <div class="adress-popup-metro" ng-repeat="metro in ::outlet.metros">
                    <span ng-style="{color: '#' + metro.color}" class="futuraIcon">&#x00BD;</span>
                    <span ng-bind="metro.name">Электрозаводская</span>
                </div>
                <div class="adress-popup-info" ng-if="outlet.remains">
                    <span class="adress-popup-status adress-popup-status-green" ng-if="outlet.remains.available">В наличии</span>
                    <span class="adress-popup-status" ng-if="outlet.remains.pickup">Под заказ</span>
                    <span ng-if="outlet.remains.available !== false">Можно забрать <span ng-bind="::outlet.remains.pickup || 'сегодня'"></span></span>
                </div>
                <span class="adress-item-arrow"><img src="/bower_components/sl-map/src/images/all/adress-arrow-left.png" alt=""></span>
            </div>
            <!--<div class="adress-popup-item adress-popup-item2 active" data-mark="adress-mark2" data-box="adress-box2">
                <div class="adress-popup-name"><span>ТЦ РИО</span> СЕКция</div>
                <div class="adress-popup-street">
                    Москва, Мажоритарный пр. 8
                    <div class="adress-popup-time">10:00-22:00</div>
                </div>
                <div class="adress-popup-metro">Электрозаводская</div>
                <div class="adress-popup-info">
                    <span class="adress-popup-status adress-popup-status-green">В наличии</span>
                    Можно забрать прямо сейчас
                </div>
                <span class="adress-item-arrow"><img src="/bower_components/sl-map/src/images/all/adress-arrow-left.png" alt=""></span>
            </div>
            <div class="adress-popup-item adress-popup-item3" data-mark="adress-mark3" data-box="adress-box3">
                <div class="adress-popup-name"><span>SUNLIGHT БОРОДИЩЕВО</span> МИНИмаркет</div>
                <div class="adress-popup-street">
                    Загопниковская, д. 507 корпус 501, ТЦ ИЮНЬ
                    <div class="adress-popup-time">ПН-ВС 10:00-22:00, СБ-ВС 11:00-12:00</div>
                </div>
                <div class="adress-popup-metro">Электрозаводская</div>
                <div class="adress-popup-info">
                    <span class="adress-popup-status">Под заказ</span>
                    Можно забрать завтра
                </div>
                <span class="adress-item-arrow"><img src="/bower_components/sl-map/src/images/all/adress-arrow-left.png" alt=""></span>
            </div>-->
        </div>
    </div>
    <div class="adress-popup-right" ng-class="{'invisible': !slMap.isMobile && !slMap.isMapActive}">
        <ng-map class="adress-popup-map" pan-control="true" pan-control-options="{position:'TOP_RIGHT'}" map-type-control="false" height="100%"
                zoom-control="true" zoom-control-options="{style:'LARGE', position:'LEFT_TOP'}" scale-control="true"
                on-bounds_changed="slMap.proxify(event, 'resize')" single-info-window="true" street-view-control="false" center="[55.755773, 37.614608]">
            <!--<img src="/bower_components/sl-map/src/images/all/popup-map.jpg" alt="" class="adress-popup-map-img">-->
            <a href="" class="adress-mark adress-mark1" data-item="adress-popup-item1" data-box="adress-box1"></a>
            <a href="" class="adress-mark adress-mark2 active" data-item="adress-popup-item2" data-box="adress-box2"></a>
            <a href="" class="adress-mark adress-mark3" data-item="adress-popup-item3" data-box="adress-box3"></a>
            <marker ng-repeat="outlet in slMap.outlets | filter: slMap.outletsFilter"
                    id="outlet_{{::outlet.id}}"
                    position="{{::outlet.geo}}"
                    on-click="slMap.proxify('select', outlet)"
                    icon="{{outlet.icon || '/bower_components/sl-map/src/images/new/marker'+ (outlet.remains.available ? '-remains' : '') +'.png'}}">
            </marker>
        </ng-map>
    </div>
    <div class="adress-popup-box-holder" ng-if="slMap.selected">
        <div class="adress-popup-box active">
            <a href="" class="adress-box-back" ng-show="slMap.isMobile" ng-click="slMap.back()" ><img src="/bower_components/sl-map/src/images/all/adress-arrow-right.png" alt=""></a>
            <a href="" class="adress-box-close" ng-click="slMap.back()"><img src="/bower_components/sl-map/src/images/all/cross-grey.png" alt=""></a>
            <div class="adress-popup-name"><span ng-bind="slMap.selected.mall">SUNLIGHT МЕГА Теплый Стан</span> <span ng-bind="slMap.selected.kind.name">гипермаркет</span></div>
            <div class="adress-popup-box-img" ng-show="slMap.constructor.getPrimary(slMap.selected.images)">
                <img ng-src="{{slMap.constructor.getPrimary(slMap.selected.images).file}}" alt="">
            </div>
            <div class="adress-popup-box-text">
                <div class="adress-popup-street" ng-bind="slMap.selected.address">
                    Москва, улица Арбат, 12 с 1
                </div>
                <div class="adress-popup-time" ng-bind="slMap.selected.opening_hours">ПН-ВС 10:00-22:00</div>
                <div class="adress-popup-metro" ng-repeat="metro in slMap.selected.metros">
                    <span ng-style="{color: '#' + metro.color}" class="futuraIcon">&#x00BD;</span>
                    <span ng-bind="metro.name">Электрозаводская</span>
                </div>
                <div class="adress-popup-info">
                    <span class="adress-popup-status">Под заказ</span>
                    Можно забрать 24 сентября
                </div>
                <a href="" class="button" ng-if="slMap.selected.remains" ng-click="reserve.openReserveDialog(slMap.selected.remains)">ЗАРЕЗЕРВИРОВАТЬ</a>
            </div>
        </div>
        <!--<div class="adress-popup-box adress-box2 active">
            <a href="" class="adress-box-back"><img src="/bower_components/sl-map/src/images/all/adress-arrow-right.png" alt=""></a>
            <a href="" class="adress-box-close"><img src="/bower_components/sl-map/src/images/all/cross-grey.png" alt=""></a>
            <div class="adress-popup-name"><span>ТЦ РИО</span> СЕКция</div>
            <div class="adress-popup-box-img">
                <img src="/bower_components/sl-map/src/images/all/adress-img1.jpg" alt="">
            </div>
            <div class="adress-popup-box-text">
                <div class="adress-popup-street">
                    Москва, Мажоритарный пр. 8
                    <div class="adress-popup-time">10:00-22:00</div>
                </div>
                <div class="adress-popup-metro">Электрозаводская</div>
                <div class="adress-popup-info">
                    <span class="adress-popup-status adress-popup-status-green">В наличии</span>
                    Можно забрать прямо сейчас
                </div>
                <a href="" class="button">ЗАРЕЗЕРВИРОВАТЬ</a>
            </div>
        </div>
        <div class="adress-popup-box adress-box3">
            <a href="" class="adress-box-back"><img src="/bower_components/sl-map/src/images/all/adress-arrow-right.png" alt=""></a>
            <a href="" class="adress-box-close"><img src="/bower_components/sl-map/src/images/all/cross-grey.png" alt=""></a>
            <div class="adress-popup-name"><span>SUNLIGHT БОРОДИЩЕВО</span> МИНИмаркет</div>
            <div class="adress-popup-box-img">
                <img src="/bower_components/sl-map/src/images/all/adress-img1.jpg" alt="">
            </div>
            <div class="adress-popup-box-text">
                <div class="adress-popup-street">
                    Загопниковская, д. 507 корпус 501, ТЦ ИЮНЬ
                    <div class="adress-popup-time">ПН-ВС 10:00-22:00, СБ-ВС 11:00-12:00</div>
                </div>
                <div class="adress-popup-metro">Электрозаводская</div>
                <div class="adress-popup-info">
                    <span class="adress-popup-status">Под заказ</span>
                    Можно забрать завтра
                </div>
                <a href="" class="button">ЗАРЕЗЕРВИРОВАТЬ</a>
            </div>
        </div>-->
    </div>
</div>
